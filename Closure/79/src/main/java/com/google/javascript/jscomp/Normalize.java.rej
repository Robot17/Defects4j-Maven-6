***************
*** 119,125 ****
    public void process(Node externs, Node root) {
      new NodeTraversal(
          compiler, new NormalizeStatements(compiler, assertOnChange))
-         .traverse(root);
      if (MAKE_LOCAL_NAMES_UNIQUE) {
        MakeDeclaredNamesUnique renamer = new MakeDeclaredNamesUnique();
        NodeTraversal t = new NodeTraversal(compiler, renamer);
--- 119,125 ----
    public void process(Node externs, Node root) {
      new NodeTraversal(
          compiler, new NormalizeStatements(compiler, assertOnChange))
+         .traverseRoots(externs, root);
      if (MAKE_LOCAL_NAMES_UNIQUE) {
        MakeDeclaredNamesUnique renamer = new MakeDeclaredNamesUnique();
        NodeTraversal t = new NodeTraversal(compiler, renamer);
